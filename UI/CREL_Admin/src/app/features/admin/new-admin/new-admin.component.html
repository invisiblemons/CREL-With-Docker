<div class="content">
  <div class="row">
    <div class="col-md-12">
      <div class="card">
        <div class="card-header"><h4 class="title">Tạo mới admin</h4></div>
        <div class="card-body p-fluid">
          <div class="grid" *ngIf="isShowSkeleton">
            <div class="sm:col-5">
              <div class="flex justify-content-center">
                <p-skeleton shape="circle" size="5rem"></p-skeleton>
              </div>
            </div>
            <div class="sm:col-7">
              <div class="grid">
                <div class="sm:col-12 md:col-6">
                  <p-skeleton height="2rem" styleClass="mb-2"></p-skeleton>
                </div>
                <div class="sm:col-12 md:col-6">
                  <p-skeleton height="2rem" styleClass="mb-2"></p-skeleton>
                </div>
                <div class="sm:col-12 md:col-6">
                  <p-skeleton height="2rem" styleClass="mb-2"></p-skeleton>
                </div>
                <div class="sm:col-12 md:col-6">
                  <p-skeleton height="2rem" styleClass="mb-2"></p-skeleton>
                </div>
                <div class="sm:col-12 md:col-6">
                  <p-skeleton height="2rem" styleClass="mb-2"></p-skeleton>
                </div>
                <div class="sm:col-12 md:col-6">
                  <p-skeleton height="2rem" styleClass="mb-2"></p-skeleton>
                </div>
                <div class="sm:col-12">
                  <p-skeleton height="4rem" styleClass="mb-2"></p-skeleton>
                </div>
                <div class="sm:col-12 md:col-6">
                  <p-skeleton height="2rem" styleClass="mb-2"></p-skeleton>
                </div>
                <div class="sm:col-12">
                  <p-skeleton height="4rem" styleClass="mb-2"></p-skeleton>
                </div>
              </div>
            </div>
          </div>

          <form novalidate (ngSubmit)="createAdmin()" [formGroup]="adminForm">
            <div class="grid" *ngIf="!isShowSkeleton">
              <div class="sm:col-4">
                <div class="flex justify-content-center">
                  <app-picture-upload
                    [imgSrc]="admin.avatarLink"
                    (outputImg)="getImgFromChild($event)"
                    [avatar]="true"
                  ></app-picture-upload>
                </div>
              </div>
              <div class="sm:col-8">
                <div class="grid">
                  <div class="form-group sm:col-12 md:col-6">
                    <label for="userName"
                      >Tài khoản <span class="required">*</span></label
                    >
                    <input
                      type="text"
                      pInputText
                      id="userName"
                      (keydown.space)="$event.preventDefault()"
                      [(ngModel)]="admin.userName"
                      placeholder="Nhập tài khoản"
                      appInputRestriction
                      formControlName="userName"
                      [class]="
                        displayMessage.userName ? 'ng-dirty ng-invalid' : ''
                      "
                    />
                    <p-message
                      severity="error"
                      *ngIf="displayMessage.userName"
                      text="{{ displayMessage.userName }}"
                    ></p-message>
                  </div>
                  <div class="form-group sm:col-12 md:col-6">
                    <label for="password" class="mr-5"
                      >Mật khẩu <span class="required">*</span></label
                    >
                    <p-password
                      promptLabel="Nhập mật khẩu"
                      weakLabel="Yếu"
                      mediumLabel="Trung bình"
                      strongLabel="Mạnh"
                      [(ngModel)]="admin.password"
                      inputId="password"
                      name="password"
                      appInputRestriction
                      formControlName="password"
                      placeholder="Nhập mật khẩu"
                    >
                      <ng-template pTemplate="header">
                        <h6>Chọn một mật khẩu</h6>
                      </ng-template>
                      <ng-template pTemplate="footer">
                        <p-divider></p-divider>
                        <p class="mt-2">Đề xuất</p>
                        <ul class="pl-2 ml-2 mt-0" style="line-height: 1.5">
                          <li>Có ít nhất 1 kí tự thường</li>
                          <li>Có ít nhất 1 kí tự hoa</li>
                          <li>Có ít nhất 1 kí tự số</li>
                          <li>Tối thiểu có 8 kí tự</li>
                          <li>Tối thiểu 1 kí tự đặc biệt</li>
                        </ul>
                      </ng-template>
                    </p-password>
                  </div>
                  <div class="form-group sm:col-12 md:col-6">
                    <label for="email"
                      >Địa chỉ Email <span class="required">*</span></label
                    >
                    <input
                      type="text"
                      pInputText
                      id="email"
                      [(ngModel)]="admin.email"
                      appInputRestriction
                      formControlName="email"
                      placeholder="Nhập địa chỉ email"
                      [class]="
                        displayMessage.email ? 'ng-dirty ng-invalid' : ''
                      "
                    />
                    <p-message
                      severity="error"
                      *ngIf="displayMessage.email"
                      text="{{ displayMessage.email }}"
                    ></p-message>
                  </div>
                  <div class="form-group sm:col-12 md:col-6">
                    <label for="phoneNumber"
                      >Số điện thoại <span class="required">*</span></label
                    >
                    <p-inputMask
                      id="phoneNumber"
                      [(ngModel)]="admin.phoneNumber"
                      pKeyFilter="int"
                      appInputRestriction
                      formControlName="phoneNumber"
                      [class]="
                        displayMessage.phoneNumber ? 'ng-dirty ng-invalid' : ''
                      "
                      placeholder="Nhập số điện thoại"
                      mask="9999 999 999"
                    ></p-inputMask>
                    <p-message
                      severity="error"
                      *ngIf="displayMessage.phoneNumber"
                      text="{{ displayMessage.phoneNumber }}"
                    ></p-message>
                  </div>
                  <div class="form-group sm:col-12 md:col-6">
                    <label for="name"
                      >Họ và tên <span class="required">*</span></label
                    >
                    <input
                      type="text"
                      pInputText
                      id="name"
                      [(ngModel)]="admin.name"
                      appInputRestriction
                      formControlName="name"
                      placeholder="Nhập họ và tên"
                      [class]="displayMessage.name ? 'ng-dirty ng-invalid' : ''"
                    />
                    <p-message
                      severity="error"
                      *ngIf="displayMessage.name"
                      text="{{ displayMessage.name }}"
                    ></p-message>
                  </div>
                  <div class="form-group sm:col-12 md:col-6">
                    <label for="birthday"
                      >Ngày sinh <span class="required">*</span></label
                    >
                    <dx-date-box
                      [(value)]="admin.birthday"
                      displayFormat="dd/MM/yyyy"
                      invalidDateMessage="Ngày sinh phải có định dạng: dd/MM/yyyy"
                      placeholder="Nhập ngày sinh"
                      appInputRestriction
                      formControlName="birthday"
                    >
                      <dx-validator>
                        <dxi-validation-rule
                          type="range"
                          [max]="maxDate"
                          message="Tuổi của bạn phải trên 18 tuổi"
                        ></dxi-validation-rule>
                      </dx-validator>
                    </dx-date-box>
                  </div>
                  <div class="form-group sm:col-12 md:col-6">
                    <label for="gender"
                      >Giới tính <span class="required">*</span></label
                    >
                    <p-dropdown
                      emptyMessage="Danh sách trống"
                      id="industry"
                      [options]="genders"
                      [(ngModel)]="selectedGender"
                      [baseZIndex]="1101"
                      [showClear]="true"
                      optionLabel="gender"
                      placeholder="Chọn giới tính"
                      appInputRestriction
                      formControlName="gender"
                      appendTo="body"
                      [class]="
                        displayMessage.gender ? 'ng-dirty ng-invalid' : ''
                      "
                    ></p-dropdown>
                    <p-message
                      severity="error"
                      *ngIf="displayMessage.gender"
                      text="{{ displayMessage.gender }}"
                    ></p-message>
                  </div>
                </div>
              </div>
            </div>
          </form>
        </div>
        <div class="card-footer">
          <div class="grid justify-content-end">
            <p-button
              label="Tạo mới"
              icon="pi pi-plus"
              type="submit"
              [loading]="loading"
              [disabled]="!adminForm.valid"
              (onClick)="createAdmin()"
              [pTooltip]="
                adminForm.valid
                  ? 'Tạo mới dữ liệu bạn đã nhập'
                  : 'Chỉ có thể tạo mới khi biểu mẫu không có lỗi'
              "
            ></p-button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
